<div id="input-partial">
  <h1>Сброс пароля</h1>
  <form method="post" id="mainForm">
    <p class="error" id="error"></p>

    <fieldset>
      <ol>
        <li>
          <label for="password">Новый пароль</label>
          <input id="password" type="password" name="password" placeholder="">
        </li>
        <li>
          <label for="confirmPassword">Подтверждение пароля</label>
          <input id="confirmPassword" type="password" name="confirmPassword" placeholder="">
        </li>
      </ol>
      <input type="hidden" id="recordId" name="recordId" value="">
    </fieldset>

    <p class="actions"><button type="submit" name="submit">Установить новый пароль</button></p>
  </form>
</div>
<div id="response-partial">
  <h1>Пароль установлен</h1>
  <p>Ваш пароль успешно установлен.</p>
</div>

<script>
  const hidden = document.getElementById('recordId');
  const recordId = new URLSearchParams(location.search).get('rid');
  hidden.value = recordId;

  setVisibility('response-partial', false);
  function updateResponse() {
    // Swap visibility
    setVisibility('input-partial', false);
    setVisibility('response-partial', true);
  }
  addPostListener('mainForm', 'error', '', updateResponse);
</script>
